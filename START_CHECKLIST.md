# ✅ Чеклист перед запуском Dashboard

## Шаг 1: Миграция базы данных
```bash
python migrate_db.py
```

**Что должно произойти:**
- ✅ Добавлены поля в таблицу `engines`: model, photo_url, n1_takeoff, n1_cruise, n2_takeoff, n2_cruise, tsn_at_install, csn_at_install, install_date
- ✅ Добавлены поля в таблицу `action_logs`: to_aircraft, position
- ✅ Добавлены поля в таблицу `aircrafts`: total_time, total_cycles
- ✅ Сообщение "Миграция завершена успешно!"

## Шаг 2: (Опционально) Добавить тестовые данные
```bash
python add_test_data.py
```

**Что добавится:**
- Общий налет самолетов (BAT: 45,623.5 hrs, BAR: 38,912.2 hrs, BAQ: 52,341.8 hrs)
- N1/N2 параметры для установленных двигателей
- Даты установки двигателей
- TSN/CSN на момент установки

## Шаг 3: Запустить сервер
```bash
START.bat
```

**Или использовать новый скрипт:**
```bash
SETUP_DASHBOARD.bat
```

## Шаг 4: Открыть браузер
```
http://localhost:8000
```

---

## Что должно работать:

### Главный дашборд:
- [x] 3 карточки самолетов (BAT, BAR, BAQ)
- [x] Темный премиум дизайн с градиентами
- [x] Общий налет самолета (вверху справа)
- [x] Кнопка ▼ внизу карточки

### При клике на ▼:
- [x] Плавное разворачивание (0.5 сек)
- [x] 4 позиции двигателей (Position 1-4)
- [x] Анимированное SVG сечение двигателя
- [x] TSN/CSN on A/C (золотые цифры)
- [x] Total TSN/CSN (белые цифры)
- [x] N1/N2 параметры
- [x] Даты установки и обновления

### Боковое меню:
- [x] Actions (Installation, Remove, Repair, Utilization, ENG Parameters)
- [x] ▶ Logistics (сворачиваемое)
  - [x] Shipment
  - [x] Parts Logistics

### Автоматические расчеты:
- [x] При добавлении ATLB → обновляются счетчики самолета
- [x] При добавлении ATLB → обновляются счетчики всех установленных двигателей
- [x] TSN on A/C = Total TSN - TSN at Install

---

## Проверка работы:

### Тест 1: Установка двигателя
1. Перейти в Installation
2. Выбрать двигатель, самолет, позицию
3. Ввести TT и TC
4. Сохранить
5. **Проверить:** На дашборде в позиции двигателя должны появиться данные

### Тест 2: Добавление полета
1. Перейти в Utilization (ATLB)
2. Выбрать самолет
3. Ввести данные полета (время, циклы)
4. Сохранить
5. **Проверить:** 
   - Общий налет самолета увеличился
   - TSN/CSN всех двигателей увеличился
   - TSN on A/C увеличился на величину полета

### Тест 3: Expand/Collapse
1. На дашборде кликнуть на ▼ под карточкой самолета
2. **Проверить:**
   - Позиции плавно разворачиваются
   - Шеврон вращается (▼ → ▲)
   - SVG двигатель анимируется
3. Кликнуть еще раз
4. **Проверить:**
   - Позиции сворачиваются
   - Шеврон возвращается (▲ → ▼)

### Тест 4: Боковое меню
1. Кликнуть на "▶ Logistics"
2. **Проверить:**
   - Стрелка вращается (▶ → ▼)
   - Появляются Shipment и Parts Logistics
3. Обновить страницу
4. **Проверить:**
   - Меню остается в том же состоянии (localStorage)

---

## Если что-то не работает:

### Дашборд не загружается:
```bash
# Проверить консоль браузера (F12)
# Ошибка: "Failed to fetch /api/dashboard/aircraft-details"
# Решение: Перезапустить сервер
```

### Данные не отображаются:
```bash
# Проверить что миграция выполнена
python migrate_db.py

# Добавить тестовые данные
python add_test_data.py
```

### SVG не анимируется:
```
# Это нормально в некоторых браузерах
# SVG анимация работает в Chrome/Edge/Firefox
```

### Expand/Collapse не работает:
```javascript
// Проверить консоль браузера (F12)
// Ошибка: "toggleEnginePositions is not defined"
// Решение: Очистить кэш браузера (Ctrl+Shift+Del)
```

---

## Документация:

1. **SUMMARY.md** - Общий обзор системы
2. **DASHBOARD_README.md** - Подробная техническая документация
3. **VISUAL_GUIDE.md** - Визуальное руководство по дизайну
4. **THIS FILE** - Чеклист запуска

---

## Полезные команды:

```bash
# Проверить структуру базы
sqlite3 aviation_mro.db ".schema engines"

# Посмотреть данные
sqlite3 aviation_mro.db "SELECT current_sn, tsn_at_install, total_time FROM engines WHERE status='INSTALLED'"

# Backup базы
copy aviation_mro.db aviation_mro.db.backup

# Полная переустановка
del aviation_mro.db
python backend/database.py
python seed_data.py
python migrate_db.py
python add_test_data.py
```

---

## Контакты и поддержка:

Все файлы проекта находятся в:
```
C:\Users\pavel\Desktop\Eng_app\
```

Логи сервера можно увидеть в окне терминала после запуска START.bat

---

✅ **Готово к запуску!**
